<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="static/style.css">
  <title>Residence List</title>
</head>
<body>
  {% extends "base_without_popup.html" %}
  {% block title %}Residence List{% endblock %}
  {% block content %}
  {% load static %}
  {% load socialaccount %}
  
  <div class = "container py-1">
    <div class = "row">
      <h1>Residence List</h1>
    </div>
  
    <form action= {% url 'search_results' %} method='get'>
      <div class = "row">
        <div class = "col-md-6">
          <label for="res_name">Name</label>
          <input type="search" list = "resnames" id="res_name" name='name' value="{{search_name}}" placeholder="Search By Residence Name" class = "form-control">
            <datalist id = "resnames">
              {% for res in resnames %}
              <option value = "{{res.name}}"></option>
              {% endfor %}
            </datalist>
        </div>
        <div class = "col-md-6">
          <label for="tag_name">Tag</label>
          <input type="search" list = "tagnames" id="tag_name" name="tag" value="{{tag_name}}" placeholder="Search By Tag" class = "form-control">
            <datalist id = "tagnames">
              {% for tag in tagnames %}
                <option value = "{{tag}}"></option>
              {% endfor %}
            </datalist>
        </div>
      </div>
      <div class="row">
        <div class="form-group col-lg-4">
          <label for="priceMin">Minimum Price</label>
          <input type="number" min=0  {% if minPrice %} value={{minPrice}} {% endif %} class="form-control" id="priceMin" placeholder="0" name="price_min">
          <label for="priceMax">Maximum Price</label>
          <input type="number" min=0 {% if maxPrice %} value={{maxPrice}} {% endif %} class="form-control" id="priceMax" placeholder="0" name="price_max">
        </div>
        <div class="form-group col-lg-4">
          <label for="ratingMin">Minimum Average Rating</label>
          <input type="number" min=0 max=5 {% if minRating %} value={{minRating}} {% endif %} class="form-control" id="ratingMin" placeholder="0" name="rating_min">
          <label for="ratingMax">Maximum Average Rating</label>
          <input type="number" min=0 max=5 {% if maxRating %} value={{maxRating}} {% endif %} class="form-control" id="ratingMax" placeholder="0" name="rating_max">
        </div>
        <div class="form-group col-lg-4">
          <label for="distMin">Minimum Distance from Campus (mi)</label>
          <input type="number" min=0 {% if minDist %} value={{minDist}} {% endif %} class="form-control" id="distMin" placeholder="0" name="dist_min">
          <label for="distMax">Maximum Distance from Campus (mi)</label>
          <input type="number" min=0 {% if maxDist %} value={{maxDist}} {% endif %} class="form-control" id="distMax" placeholder="0" name="dist_max">
        </div>
      </div>
      <div class = "row">
        <div class="form-group col-lg-4">
          <label for="OrderBy">Order By</label>
          <select id="OrderBy" class="form-control" name="OrderBy">
            <option value="None" {% if orderByVal is None or orderByVal == 'None' %} selected {% endif %}>None</option>
            <option value="rating_average" {% if orderByVal == 'rating_average' %} selected {% endif %}>Rating</option>
            <option value="rent_average" {% if orderByVal == 'rent_average' %} selected {% endif %}>Price</option>
            <option value="distance" {% if orderByVal == 'distance' %} selected {% endif %}>Distance</option>
          </select>
          <label for="Order Type">Order Type</label>
          <select id="OrderType" class="form-control" name="OrderType">
            <option value="None" {% if orderTypeVal is None or orderTypeVal == 'None' %} selected {% endif %}>None</option>
            <option value="+" {% if orderTypeVal == '+' %} selected {% endif %}>Low to High</option>
            <option value="-" {% if orderTypeVal == '-' %} selected {% endif %}>High to Low</option>
          </select>
        </div>
        <div class="form-group col-lg-4">
          <label for="PetPolicy">Pet Policy</label>
          <select id="PetPolicy" class="form-control" name="PetPolicy">
            <option value="None" {% if petPolicyVal is None or petPolicyVal == 'None' %} selected {% endif %}>None</option>
            <option value="NP" {% if petPolicyVal == 'NP' %} selected {% endif %}>No Pets</option>
            <option value="RP" {% if petPolicyVal == 'RP' %} selected {% endif %}>Restricted Pets</option>
            <option value="PP" {% if petPolicyVal == 'PP' %} selected {% endif %}>Increased Rent</option>
            <option value="OP" {% if petPolicyVal == 'OP' %} selected {% endif %}>Other</option>
            <option value="UN" {% if petPolicyVal == 'UN' %} selected {% endif %}>Unknown</option>
          </select>
          <label for="ParkingPolicy">Parking Policy</label>
          <select id="ParkingPolicy" class="form-control" name="ParkingPolicy">
            <option value="None" {% if parkingPolicyVal is None or parkingPolicyVal == 'None' %} selected {% endif %}>None</option>
            <option value="NP" {% if parkingPolicyVal == 'NP' %} selected {% endif %}>No Parking</option>
            <option value="PP" {% if parkingPolicyVal == 'PP' %} selected {% endif %}>Paid Parking</option>
            <option value="RP" {% if parkingPolicyVal == 'RP' %} selected {% endif %}>Reserved Parking</option>
            <option value="IP" {% if parkingPolicyVal == 'IP' %} selected {% endif %}>Included Parking</option>
            <option value="OP" {% if parkingPolicyVal == 'OP' %} selected {% endif %}>Other</option>
            <option value="UN" {% if parkingPolicyVal == 'UN' %} selected {% endif %}>Unknown</option>
          </select>
        </div>
        <div class="form-group col-lg-4">
          <label for="Floor Plan">Floor Plan</label>
          <select id="FloorPlan" class="form-control" name="FloorPlan">
            <option value="None" {% if floorPlanVal is None or floorPlanVal == 'None' %} selected {% endif %}>None</option>
            <option value="ST" {% if floorPlanVal == 'ST' %} selected {% endif %}>Studio</option>
            <option value="SH" {% if floorPlanVal == 'SH' %} selected {% endif %}>Shared-room</option>
            <option value="TO" {% if floorPlanVal == 'TO' %} selected {% endif %}>Two-room</option>
            <option value="TH" {% if floorPlanVal == 'TH' %} selected {% endif %}>Three-room</option>
            <option value="FR" {% if floorPlanVal == 'FR' %} selected {% endif %}>Four-room</option>
            <option value="UN" {% if floorPlanVal == 'UN' %} selected {% endif %}>Unknown</option>
          </select>
        </div>
      </div>
      <div class = "row">
        <div class = "col-md-4"></div>
        <div class = "col-md-4">
          <button class="btn btn-dark btn-md" type="Search">Filter</button>
        </div>
      </div>
    </form>
  </div>
  <br>
  <br>
  {% if object_list %}
  <section id="about" class="about-section-padding">
  {% for Residence in object_list %}
      <div class="container">
        <br>
        <hr class = "mb-4" style = "color:#212529;">
        <br>
        <div class="row">
          <div class="col-lg-4 cl-md-12 col-12">
            {% if Residence.residence_image.first %}
              <div class="about-img">
                <img src="{{ Residence.residence_image.first.photo.url }}" class="img-fluid about-section-img ">
              </div>
            {% else %}
              <div class="about-img">
                <img src="{% get_media_prefix %}test_2.jpeg" alt="" class="img-fluid about-section-img ">
              </div>
            {% endif %}
            {% if Residence.isReported.count >= 1 %}
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-flag" viewBox="0 0 16 16">
            <path d="M14.778.085A.5.5 0 0 1 15 .5V8a.5.5 0 0 1-.314.464L14.5 8l.186.464-.003.001-.006.003-.023.009a12.435 12.435 0 0 1-.397.15c-.264.095-.631.223-1.047.35-.816.252-1.879.523-2.71.523-.847 0-1.548-.28-2.158-.525l-.028-.01C7.68 8.71 7.14 8.5 6.5 8.5c-.7 0-1.638.23-2.437.477A19.626 19.626 0 0 0 3 9.342V15.5a.5.5 0 0 1-1 0V.5a.5.5 0 0 1 1 0v.282c.226-.079.496-.17.79-.26C4.606.272 5.67 0 6.5 0c.84 0 1.524.277 2.121.519l.043.018C9.286.788 9.828 1 10.5 1c.7 0 1.638-.23 2.437-.477a19.587 19.587 0 0 0 1.349-.476l.019-.007.004-.002h.001M14 1.221c-.22.078-.48.167-.766.255-.81.252-1.872.523-2.734.523-.886 0-1.592-.286-2.203-.534l-.008-.003C7.662 1.21 7.139 1 6.5 1c-.669 0-1.606.229-2.415.478A21.294 21.294 0 0 0 3 1.845v6.433c.22-.078.48-.167.766-.255C4.576 7.77 5.638 7.5 6.5 7.5c.847 0 1.548.28 2.158.525l.028.01C9.32 8.29 9.86 8.5 10.5 8.5c.668 0 1.606-.229 2.415-.478A21.317 21.317 0 0 0 14 7.655V1.222z"/>
          </svg>
        {% endif %}
      </div>
          <div class="col-lg-8 col-md-12 col-12 ps-lg-5 mt-md-5">
            <div class="about-text">
              <h2>{{Residence.name}}</h2>
              <p>Average Rating: {{Residence.rating_average}}<br>
                Average Price: {{Residence.rent_average}}<br>
                Distance from Campus: {{Residence.distance}} miles<br>
              </p>
              <a href = "{%url 'residence_info' Residence.pk%}"><button type = "button" class="btn btn-lg btn-dark">View Details</button></a>
            </div>
          </div>
        </div>
      </div>
  {% endfor %}
  <br>
  <br>
  </section>
  
  </div>
  {% else %}
  <h1>There are no residences that match your request!</h1>
  {% endif %}
  {% endblock %}
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
</body>
</html>